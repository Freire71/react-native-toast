{"version":3,"names":["resolveValue","ToastPosition","genId","ActionType","dispatch","createToast","message","type","opts","createdAt","Date","now","visible","pauseDuration","position","TOP","providerKey","id","createHandler","options","toast","UPSERT_TOAST","error","success","loading","dismiss","toastId","DISMISS_TOAST","remove","REMOVE_TOAST","promise","msgs","then","p","catch","e"],"sources":["toast.ts"],"sourcesContent":["import {\n  DefaultToastOptions,\n  Element,\n  resolveValue,\n  Toast,\n  ToastOptions,\n  ToastPosition,\n  ToastType,\n  ValueOrFunction,\n} from './types';\nimport { genId } from './utils';\nimport { ActionType, dispatch } from './store';\n\ntype Message = ValueOrFunction<Element, Toast>;\n\ntype ToastHandler = (message: Message, options?: ToastOptions) => string;\n\nconst createToast = (\n  message: Message,\n  type: ToastType = 'blank',\n  opts?: ToastOptions\n): Toast => ({\n  createdAt: Date.now(),\n  visible: true,\n  type,\n  message,\n  pauseDuration: 0,\n  position: ToastPosition.TOP,\n  providerKey: 'DEFAULT',\n  ...opts,\n  id: opts?.id || genId(),\n});\n\nconst createHandler =\n  (type?: ToastType): ToastHandler =>\n  (message, options) => {\n    const toast = createToast(message, type, options);\n    dispatch({ type: ActionType.UPSERT_TOAST, toast });\n    return toast.id;\n  };\n\nconst toast = (message: Message, opts?: ToastOptions) =>\n  createHandler('blank')(message, opts);\n\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\n\ntoast.dismiss = (toastId?: string) => {\n  dispatch({\n    type: ActionType.DISMISS_TOAST,\n    toastId,\n  });\n};\n\ntoast.remove = (toastId?: string) =>\n  dispatch({ type: ActionType.REMOVE_TOAST, toastId });\n\ntoast.promise = <T>(\n  promise: Promise<T>,\n  msgs: {\n    loading: Element;\n    success: ValueOrFunction<Element, T>;\n    error: ValueOrFunction<Element, any>;\n  },\n  opts?: DefaultToastOptions\n) => {\n  const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n\n  promise\n    .then((p) => {\n      toast.success(resolveValue(msgs.success, p), {\n        id,\n        ...opts,\n        ...opts?.success,\n      });\n      return p;\n    })\n    .catch((e) => {\n      toast.error(resolveValue(msgs.error, e), {\n        id,\n        ...opts,\n        ...opts?.error,\n      });\n    });\n\n  return promise;\n};\n\nexport { toast };\n"],"mappings":"AAAA,SAGEA,YAHF,EAMEC,aANF,QASO,SATP;AAUA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,SAArC;;AAMA,MAAMC,WAAW,GAAG,UAClBC,OADkB;EAAA,IAElBC,IAFkB,uEAEA,OAFA;EAAA,IAGlBC,IAHkB;EAAA,OAIP;IACXC,SAAS,EAAEC,IAAI,CAACC,GAAL,EADA;IAEXC,OAAO,EAAE,IAFE;IAGXL,IAHW;IAIXD,OAJW;IAKXO,aAAa,EAAE,CALJ;IAMXC,QAAQ,EAAEb,aAAa,CAACc,GANb;IAOXC,WAAW,EAAE,SAPF;IAQX,GAAGR,IARQ;IASXS,EAAE,EAAE,CAAAT,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAES,EAAN,KAAYf,KAAK;EATV,CAJO;AAAA,CAApB;;AAgBA,MAAMgB,aAAa,GAChBX,IAAD,IACA,CAACD,OAAD,EAAUa,OAAV,KAAsB;EACpB,MAAMC,KAAK,GAAGf,WAAW,CAACC,OAAD,EAAUC,IAAV,EAAgBY,OAAhB,CAAzB;EACAf,QAAQ,CAAC;IAAEG,IAAI,EAAEJ,UAAU,CAACkB,YAAnB;IAAiCD;EAAjC,CAAD,CAAR;EACA,OAAOA,KAAK,CAACH,EAAb;AACD,CANH;;AAQA,MAAMG,KAAK,GAAG,CAACd,OAAD,EAAmBE,IAAnB,KACZU,aAAa,CAAC,OAAD,CAAb,CAAuBZ,OAAvB,EAAgCE,IAAhC,CADF;;AAGAY,KAAK,CAACE,KAAN,GAAcJ,aAAa,CAAC,OAAD,CAA3B;AACAE,KAAK,CAACG,OAAN,GAAgBL,aAAa,CAAC,SAAD,CAA7B;AACAE,KAAK,CAACI,OAAN,GAAgBN,aAAa,CAAC,SAAD,CAA7B;;AAEAE,KAAK,CAACK,OAAN,GAAiBC,OAAD,IAAsB;EACpCtB,QAAQ,CAAC;IACPG,IAAI,EAAEJ,UAAU,CAACwB,aADV;IAEPD;EAFO,CAAD,CAAR;AAID,CALD;;AAOAN,KAAK,CAACQ,MAAN,GAAgBF,OAAD,IACbtB,QAAQ,CAAC;EAAEG,IAAI,EAAEJ,UAAU,CAAC0B,YAAnB;EAAiCH;AAAjC,CAAD,CADV;;AAGAN,KAAK,CAACU,OAAN,GAAgB,CACdA,OADc,EAEdC,IAFc,EAOdvB,IAPc,KAQX;EACH,MAAMS,EAAE,GAAGG,KAAK,CAACI,OAAN,CAAcO,IAAI,CAACP,OAAnB,EAA4B,EAAE,GAAGhB,IAAL;IAAW,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEgB,OAAT;EAAX,CAA5B,CAAX;EAEAM,OAAO,CACJE,IADH,CACSC,CAAD,IAAO;IACXb,KAAK,CAACG,OAAN,CAAcvB,YAAY,CAAC+B,IAAI,CAACR,OAAN,EAAeU,CAAf,CAA1B,EAA6C;MAC3ChB,EAD2C;MAE3C,GAAGT,IAFwC;MAG3C,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEe,OAAT;IAH2C,CAA7C;IAKA,OAAOU,CAAP;EACD,CARH,EASGC,KATH,CASUC,CAAD,IAAO;IACZf,KAAK,CAACE,KAAN,CAAYtB,YAAY,CAAC+B,IAAI,CAACT,KAAN,EAAaa,CAAb,CAAxB,EAAyC;MACvClB,EADuC;MAEvC,GAAGT,IAFoC;MAGvC,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEc,KAAT;IAHuC,CAAzC;EAKD,CAfH;EAiBA,OAAOQ,OAAP;AACD,CA7BD;;AA+BA,SAASV,KAAT"}