{"version":3,"names":["createToast","message","type","opts","createdAt","Date","now","visible","pauseDuration","position","ToastPosition","TOP","providerKey","id","genId","createHandler","options","toast","dispatch","ActionType","UPSERT_TOAST","error","success","loading","dismiss","toastId","DISMISS_TOAST","remove","REMOVE_TOAST","promise","msgs","then","p","resolveValue","catch","e"],"sources":["toast.ts"],"sourcesContent":["import {\n  DefaultToastOptions,\n  Element,\n  resolveValue,\n  Toast,\n  ToastOptions,\n  ToastPosition,\n  ToastType,\n  ValueOrFunction,\n} from './types';\nimport { genId } from './utils';\nimport { ActionType, dispatch } from './store';\n\ntype Message = ValueOrFunction<Element, Toast>;\n\ntype ToastHandler = (message: Message, options?: ToastOptions) => string;\n\nconst createToast = (\n  message: Message,\n  type: ToastType = 'blank',\n  opts?: ToastOptions\n): Toast => ({\n  createdAt: Date.now(),\n  visible: true,\n  type,\n  message,\n  pauseDuration: 0,\n  position: ToastPosition.TOP,\n  providerKey: 'DEFAULT',\n  ...opts,\n  id: opts?.id || genId(),\n});\n\nconst createHandler =\n  (type?: ToastType): ToastHandler =>\n  (message, options) => {\n    const toast = createToast(message, type, options);\n    dispatch({ type: ActionType.UPSERT_TOAST, toast });\n    return toast.id;\n  };\n\nconst toast = (message: Message, opts?: ToastOptions) =>\n  createHandler('blank')(message, opts);\n\ntoast.error = createHandler('error');\ntoast.success = createHandler('success');\ntoast.loading = createHandler('loading');\n\ntoast.dismiss = (toastId?: string) => {\n  dispatch({\n    type: ActionType.DISMISS_TOAST,\n    toastId,\n  });\n};\n\ntoast.remove = (toastId?: string) =>\n  dispatch({ type: ActionType.REMOVE_TOAST, toastId });\n\ntoast.promise = <T>(\n  promise: Promise<T>,\n  msgs: {\n    loading: Element;\n    success: ValueOrFunction<Element, T>;\n    error: ValueOrFunction<Element, any>;\n  },\n  opts?: DefaultToastOptions\n) => {\n  const id = toast.loading(msgs.loading, { ...opts, ...opts?.loading });\n\n  promise\n    .then((p) => {\n      toast.success(resolveValue(msgs.success, p), {\n        id,\n        ...opts,\n        ...opts?.success,\n      });\n      return p;\n    })\n    .catch((e) => {\n      toast.error(resolveValue(msgs.error, e), {\n        id,\n        ...opts,\n        ...opts?.error,\n      });\n    });\n\n  return promise;\n};\n\nexport { toast };\n"],"mappings":";;;;;;;AAAA;;AAUA;;AACA;;AAMA,MAAMA,WAAW,GAAG,UAClBC,OADkB;EAAA,IAElBC,IAFkB,uEAEA,OAFA;EAAA,IAGlBC,IAHkB;EAAA,OAIP;IACXC,SAAS,EAAEC,IAAI,CAACC,GAAL,EADA;IAEXC,OAAO,EAAE,IAFE;IAGXL,IAHW;IAIXD,OAJW;IAKXO,aAAa,EAAE,CALJ;IAMXC,QAAQ,EAAEC,oBAAA,CAAcC,GANb;IAOXC,WAAW,EAAE,SAPF;IAQX,GAAGT,IARQ;IASXU,EAAE,EAAE,CAAAV,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEU,EAAN,KAAY,IAAAC,YAAA;EATL,CAJO;AAAA,CAApB;;AAgBA,MAAMC,aAAa,GAChBb,IAAD,IACA,CAACD,OAAD,EAAUe,OAAV,KAAsB;EACpB,MAAMC,KAAK,GAAGjB,WAAW,CAACC,OAAD,EAAUC,IAAV,EAAgBc,OAAhB,CAAzB;EACA,IAAAE,eAAA,EAAS;IAAEhB,IAAI,EAAEiB,iBAAA,CAAWC,YAAnB;IAAiCH;EAAjC,CAAT;EACA,OAAOA,KAAK,CAACJ,EAAb;AACD,CANH;;AAQA,MAAMI,KAAK,GAAG,CAAChB,OAAD,EAAmBE,IAAnB,KACZY,aAAa,CAAC,OAAD,CAAb,CAAuBd,OAAvB,EAAgCE,IAAhC,CADF;;;AAGAc,KAAK,CAACI,KAAN,GAAcN,aAAa,CAAC,OAAD,CAA3B;AACAE,KAAK,CAACK,OAAN,GAAgBP,aAAa,CAAC,SAAD,CAA7B;AACAE,KAAK,CAACM,OAAN,GAAgBR,aAAa,CAAC,SAAD,CAA7B;;AAEAE,KAAK,CAACO,OAAN,GAAiBC,OAAD,IAAsB;EACpC,IAAAP,eAAA,EAAS;IACPhB,IAAI,EAAEiB,iBAAA,CAAWO,aADV;IAEPD;EAFO,CAAT;AAID,CALD;;AAOAR,KAAK,CAACU,MAAN,GAAgBF,OAAD,IACb,IAAAP,eAAA,EAAS;EAAEhB,IAAI,EAAEiB,iBAAA,CAAWS,YAAnB;EAAiCH;AAAjC,CAAT,CADF;;AAGAR,KAAK,CAACY,OAAN,GAAgB,CACdA,OADc,EAEdC,IAFc,EAOd3B,IAPc,KAQX;EACH,MAAMU,EAAE,GAAGI,KAAK,CAACM,OAAN,CAAcO,IAAI,CAACP,OAAnB,EAA4B,EAAE,GAAGpB,IAAL;IAAW,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEoB,OAAT;EAAX,CAA5B,CAAX;EAEAM,OAAO,CACJE,IADH,CACSC,CAAD,IAAO;IACXf,KAAK,CAACK,OAAN,CAAc,IAAAW,mBAAA,EAAaH,IAAI,CAACR,OAAlB,EAA2BU,CAA3B,CAAd,EAA6C;MAC3CnB,EAD2C;MAE3C,GAAGV,IAFwC;MAG3C,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEmB,OAAT;IAH2C,CAA7C;IAKA,OAAOU,CAAP;EACD,CARH,EASGE,KATH,CASUC,CAAD,IAAO;IACZlB,KAAK,CAACI,KAAN,CAAY,IAAAY,mBAAA,EAAaH,IAAI,CAACT,KAAlB,EAAyBc,CAAzB,CAAZ,EAAyC;MACvCtB,EADuC;MAEvC,GAAGV,IAFoC;MAGvC,IAAGA,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEkB,KAAT;IAHuC,CAAzC;EAKD,CAfH;EAiBA,OAAOQ,OAAP;AACD,CA7BD"}